---
layout: post
title:  "This Month's Read IV: Ghosts, jets and other shenigans"
date:   2025-06-28
categories: post
publish: true
ongoing: true
home: true

ids:
    - Overview
    # - Calculus of variations
    - Constrained dynamics
    - Homological algebra
    - Field theory
    # - Extras
    - References
    - Footnotes

defs:
    - Dirac bracket
    - Antighost
---

"This month's read" will cover some interesting, but fascinating concepts in field theory and the calculus of variations. Most physicists have encountered the notion of (Faddeev&ndash;Popov) 'ghost' at some point or another in there carreer and might have thought "What in the world is this? Do we really need this?" On the other hand, science aficionados might have encountered that same term in (popular) science news, where it is often depicted as some mysterious and magical thing. This post aims to clear up some of the mystery and explain why these objects are 'necessary' for a rigorous mathematical treatment of the subject.

<hr id = "Overview">
<div class = "nav-block"><div class = "side">Overview</div></div>

The story starts with the treatment of constrained dynamics by Dirac. He found a way to elegantly incorporate constraints into the classical Hamiltonian formulation of classical mechanics. Extending this formulation in an algebraic manner, quite naturally leads to the notion of 'ghosts', even in the particle setting, where the so-called <i>BRST formalism</i> is introduced most easily. Going beyond particles is then rather straight forward, although the Lagrangian treatment is more natural in this case (since field theories are often treated from the Lagrangian point of view, although a Hamiltonian formulation is still possible).<br><br>

At the same time, to formally treat variational problems and their subtleties, it will be necessary to pass beyond the classical geometry of phase spaces and enter the realm of <i>jet bundles</i>. The resulting structure will be a combination of the <i>variational bicomplex</i> and the <i>BV-BRST complex</i>. Although this might look like some casual name-dropping, all these notions will be made clear by the end of this post.

<hr id = "ConstrainedDynamics">
<div class = "nav-block"><div class = "side">Constrained Dynamics</div></div>

One of the foundational formulations of classical mechanics was introduced by Hamilton in 1833. The central object in this formulation is the Hamiltonian (function) $H:\mathbb{R}^{2n}\rightarrow\mathbb{R}$, which depends on both the ordinary coordinates $q^i$ and their associated momenta $p_i$. To give an example, consider a particle moving in 3D. the coordinates are then $q^1=x$, $q^2=y$ and $q^3=z$, and the associated momenta are $p_1=mv_1$, $p_2=mv_2$ and $p_3=mv_3$. However, for more involved systems, such as those involving electromagnetism, these expression can change.<br><br>

But what about constraints of the form

$$\zeta(q,p)=0\,.$$

For example, in the point particle case, a pendulum attached to a rigid bar (of length $a\in\mathbb{R}^+$). This would be modeled by a constraint of the form

$$\zeta_{\text{pendulum}}(q,p) := r^2-a^2 = (x^2+y^2+z^2)-a^2\,.$$

Another example would be a solid wall (e.g. to the left of $x=0$). This would be modeled by a constraint of the form[^1]

$$\zeta_{\text{wall}}(q,p) := \begin{cases}+\infty & x<0\\ 0 & x\geq0\,.\end{cases}$$

[^1]: $+\infty$ could be replaced by any positive value without altering the final result (at least classically).

In the Lagrangian setting[^2], where we are simply minimizing (or extremizing) the action, these constraints are easily incorporated. We just have to replace the action

[^2]: Passing between the Hamiltonian and Lagrangian frameworks requires us to replace the canonical coordinates $(q,p)$ with the generalized coordinates $(q,\dot{q})$, but we will ignore this technicality.

$$S[q,\dot{q}] := \int_{t_1}^{t_2}L(q,\dot{q})\,dt$$

by the extended action

$$S[q,\dot{q},\lambda] := \int_{t_1}^{t_2}\Big(L(q,\dot{q}) + \sum_a\lambda_a\xi_a\Bigr)\,dt\,,$$

where the $\lambda_a$ are called Lagrange multipliers. The constraint equations then simply follow from the extremality conditions

$$\frac{\delta S}{\delta\lambda_a}=\xi_a=0\,.$$

All of this can also easily be done in the Hamiltonian framework, thereby opening up the study of Poisson geometry to the inclusion of constraints. Hamilton's equations of motion read

$$\frac{\partial H}{\partial q^i} = \dot{p}_i \qquad\text{and}\qquad \frac{\partial H}{\partial p_i}=-\dot{q}^i\,.$$

After introducing the <b>Poisson bracket</b>

$$\{f,g\} := \frac{\partial f}{\partial p_i}\frac{\partial g}{\partial q^i} - \frac{\partial g}{\partial p_i}\frac{\partial f}{\partial q^i}\,,$$

these equations can be rewritten as

$$\dot{p}_i = \{H,q^i\} \qquad\text{and}\qquad \dot{q}^i = \{H,p_i\}\,.$$

The constrained equations of motion are then generated by replacing the original Hamiltonian $H$ by the extended Hamiltonian

$$H_E(q,p,\lambda) := H(q,p) + \sum_a\lambda_a\xi_a(q,p)\,,$$

where the $\lambda_a$ play a role similar to the Lagrange multipliers in the Lagrangian framework.<br><br>

Dirac's remarkable insight was to not just stop here, but consider the consistency conditions on the constraint functions and study the algebraic structure that arises. So, assume that we start with a set of constraint functions $\{\zeta_a\}_{a\leq n}$, the so-called <b>primary constraints</b>. Under Hamiltonian evolution, the constraints should be <b>weakly</b> conserved, i.e. conserved when the equations of motion and the constraints are satisfied:

$$\{H_T,\zeta_a\}\approx0\,,$$

where $f(q,p)\approx0$ means that the phase space function $f$ vanishes <b>on shell</b>, i.e. on the space of solutions of the equations of motion. These consistency conditions are either tautologies, i.e. no new constraints are obtained, a condition on the Lagrange multipliers is obtained, or they lead to equations not involving the Lagrange multipliers:

$$\chi_b(q,p)=0\,.$$

These new constraints are said to be <b>secondary</b>.[^3] Besides this primary-secondary distinction, another distinction exists. A phase space function is said to be <b>first class</b> if its Poisson bracket with every constraint vanishes weakly. For example, the consistency conditions state that the (total) Hamiltonian is first class! If a function is not first class, it is said to be <b>second class</b>. Primary constraints are also first class. For first-class, primary costraints, this gives rise to the following expression:

$$\{\zeta_a,\zeta_b\} = C^c_{ab}\zeta_c + T^i_{ab}\frac{\delta S}{\delta x^i}\,.$$

[^3]: Note that the distinction between primary and secondary is mainly artificial. One could add to the initial set of constraints and obtain the same theory. For a refinement, see the <i>Dirac conjecture</i>.

Now, for the people that have some background in Lie algebra theory (or more complex subjects such as <i>Kac--Moody algebras</i>), this equation might look familiar. However, it is worthwile to analyze it in detail. Three cases can be considered:

* $T^i_{ab}=0$ and $C^c_{ab}$ are constants: In this case, the constraints form an ordinary <a href = "https://en.wikipedia.org/wiki/Poisson_algebra" target = "_blank" rel = "noopener">Poisson algebra</a>. These constraint algebras are also called <b>closed algebras</b>, since they can be exponentiated to obtain a group, a <a href = "https://en.wikipedia.org/wiki/Lie_group" target = "_blank" rel = "noopener">Lie group</a> even.
* $T^i_{ab}=0$: Here, the $C^c_{ab}(q,p)$ are called the <b>structure functions</b> of the constraint algebra. Such algebras are also called <b>soft algebras</b>.
* General case: These are called <b>open algebras</b> since they only close on shell.

<div class = "note" markdown = "1">
<div class = "side">Note</div>
Technically, it is not entirely correct that all closed algebras correspond to Lie algebras. This is only the case when the constraints are independent, the so-called <b>irreducible</b> case. For reducible constraint algebras, the resulting structure is that of a <a href = "https://ncatlab.org/nlab/show/L-infinity-algebra" target = "_blank">$L_\infty$-algebra</a>. For soft algebras, we obtain a similar situation. However, these are not algebras in proper sense. They form Lie algebroids or, for reducible theories, <a href = "https://ncatlab.org/nlab/show/Lie+infinity-algebroid" target = "_blank">$L_\infty$-algebroids</a>. And to finalize this remark, the last case gives rise to <i>central extensions of $L_\infty$-algebroids<i>.[^4]
</div>

[^4]: Central extensions pop up everywhere in mathematics and physics. They arise, for example, in the study of projective representations in quantum mechanics (see my Master thesis) or in <a href = "https://en.wikipedia.org/wiki/Conformal_field_theory" target = "_blank" rel = "noopener">conformal field theory</a> (the Virasoro algebra).

Although not entirely relevant for my story, I do want to include some more information about Dirac's work since he is one of the god's of theoretical physics. The keen reader might have noticed that the above algebraic structure applies to the first-class constraints only. But what about second-class constraints? The simplest solution, due to Dirac, was just to remove these from the picture. Instead of using the original Poisson bracket, the <b id = "Diracbracket">Dirac bracket</b> is introduced:

$$\{f,g\}_D := \{f,g\} - \{f,\chi_a\}C^{ab}\{\chi_b,g\}\,,$$

where $C^{ab}$ is the inverse of the matrix $C_{ab}:=\{\chi_a,\chi_b\}$.

<hr id = "HomologicalAlgebra">
<div class = "nav-block"><div class = "side">Homological algebra</div></div>

Now, what we are really interested in is the algebra of physical observables. If we denote the original phase space by $M$ and the solution manifold by $\Sigma$, this algebra is given by

$$C^\infty(\Sigma) \cong C^\infty(M)/\mathcal{N}\,,$$

where $\mathcal{N}$ is the ideal generated by the constraints. Now, how to characterize the algebra $C^\infty(\Sigma)$? In general, $\Sigma$ will not be a nice manifold and, hence, describing its algebra of smooth functions can be difficult analytically. For this reason, it is interesting to consider a more algebraic approach. What we want to do is build a space of functions such that all functions generated by the constraints vanish: $f(\zeta(q,p))\approx0$. The solutions to this problem was originally introduced in mathematics by <a href = "https://en.wikipedia.org/wiki/Jean-Louis_Koszul" target = "_blank" rel = "noopener">Koszul</a> and will allow us to treat the irreducible cases.[^5]

[^5]: To handle reducible cases, the extension by Tate is required. However, the most important ideas are already present in the work by Koszul and, hence, we will restrict ourselves to this case.

We start with the function space $C^\infty(M)$. These functions are generated by the variables $q^1,\ldots,q^n,p_1,\ldots,p_n$. To these variables, we now adjoin a new odd variable $\mathcal{P}_a$ for every constraint: $\mathcal{P}_a\mathcal{P}_b=-\mathcal{P}_b\mathcal{P}_a$. These variables are called <b id = "Antighost">antighosts</b>. On the (tensor) product algebra $C^\infty(M)\otimes\mathbb{C}[\mathcal{P}_a]$, which is polynomial in the antighosts, one can then define a derivation $\delta_K$ as follows (it is extended to arbitrary functions through the <a href = "https://en.wikipedia.org/wiki/Product_rule" target = "_blank" rel ="noopener">Leibniz rule</a>):

$$\delta_K q^i=\delta_K p_i = 0\qquad\text{and}\qquad\delta_K\mathcal{P}_a = \zeta_a\,.$$

The next step will be obvious for the people that know some homological algebra. It is not hard to see that the above rules turn $\delta_K$ into a nilpotent operator, i.e. $\delta_K^2=0$. Accordingly, we can form the quotient

$$H^\bullet(\delta_K) := \frac{\ker(\delta_K)}{\mathrm{im}(\delta_K)}\,.$$

This group, called a <b>cohomology group</b>, obtains a grading from the antighost degree, which is defined as follows:

$$\mathrm{antigh}\bigl(f(q,p)\mathcal{P}_{a_1}\cdots\mathcal{P}_{a_n}\bigr) := n\,.$$

Now, it can be shown that functions $f$ that vanish on shell, i.e. on the constraint surface, must be of the form $f^a(q,p)\zeta_a(q,p)$ and, hence, that

$$f = f^a\zeta_a = \delta_K(f^a\mathcal{P}_a)\,,$$

i.e. they lie in the image of $\mathrm{im}(\delta_K)$. It follows that the cohomology in antighost degree 0 recovers the physical observables

\begin{gather}
    C^\infty(\Sigma)\cong H^0(\delta_K)\,.
\end{gather}

<div style = "height: 300px"></div>

<hr id = "FieldTheory">
<div class = "nav-block"><div class = "side">Field Theory</div></div>

<div style = "height: 300px"></div>

<!-- <hr id = "Extras">
<div class = "nav-block"><div class = "side">Extras</div></div> -->

<hr id = "References">
<div class = "nav-block"><div class = "side">References</div></div>

* P. A. M. Dirac (1950). <i>Generalized Hamiltonian Dynamics</i>. Canadian Journal of Mathematics, 2, 129–148.

<hr id = "Footnotes">
<div class = "nav-block"><div class = "side">Footnotes</div></div>
